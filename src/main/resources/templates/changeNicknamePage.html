<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>설정</title>
</head>
<body>
<div>
  <h2>닉네임 변경</h2>

  <div class="settings-menu">
    <button class="settings-menu-button" value="home">홈으로</button>
    <br/>
    <button class="settings-menu-button" value="password">비밀번호 변경</button>
    <br/>
    <button class="settings-menu-button"  value="nickname">닉네임 변경</button>
    <br/>
  </div>

  <form th:method="post" th:action="@{/settings/nickname}" th:object="${editDto}">
    <div>
      <label th:for="loginId">이메일 : </label>
      <label th:text="${loginId}"></label>
    </div>
    <br/>
    <div>
      <label th:for="nowPassword">현재 비밀번호 : </label>
      <input type="password" th:field="*{nowPassword}"/>
    </div>
    <br/>
    <div>
      <label th:for="oldNickname">현재 닉네임 : </label>
      <label th:text="${oldNickname}"></label>
    </div>
    <br/>
    <div>
      <label th:for="newNickname">새 닉네임 : </label>
      <input type="text" th:field="*{newNickname}"/>
    </div>
    <br/>
    <button type="submit">수정</button>
  </form>
</div>
<script>
  const menuEvent = document.querySelectorAll(".settings-menu-button");
  for (let s of menuEvent) {
      s.addEventListener("click", e => {
          const current = e.currentTarget;
          if (current.value == "home") {
            let urlParam = current.value;
            window.open('/' + urlParam, '_self');
          }
          if (current.value == "password") {
              let urlParam = "settings/password";
              //let memberId = document.getElementById('user_id').value;
              //window.open('/' + urlParam + '/' + memberId, '_self');
              window.open('/' + urlParam, '_self');
          }
          if (current.value == "nickname") {
              let urlParam = "settings/nickname";
              //let memberId = document.getElementById('user_id').value;
              //window.open('/' + urlParam + '/' + memberId, '_self');
              window.open('/' + urlParam, '_self');
          }
      });
  }
</script>
</body>
</html>